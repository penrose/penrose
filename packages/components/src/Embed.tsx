import React, { CSSProperties } from "react";
import "./Embed.css";
import Logo from "./icons/Logo";
import Resample from "./icons/Resample";
import { Simple, SimpleProps } from "./Simple";

const footerStyle: CSSProperties = {
  display: "flex",
  overflow: "hidden",
  justifyContent: "space-between",
  padding: "0 1em",
  alignItems: "center",
  backgroundColor: "#40b4f7",
  borderRadius: "0 0 9px 9px",
};

const containerStyle: CSSProperties = {
  position: "relative",
  borderRadius: "10px",
  border: "0.5px solid rgba(0, 0, 0, 0.2)",
  boxShadow: "0 5px 8px 0 rgba(0, 0, 0, 0.2)",
  overflow: "hidden",
};

const textStyle: CSSProperties = {
  fontFamily: '"Open Sans", sans-serif',
  color: "white",
  margin: "0.7em",
  fontWeight: "lighter",
  fontSize: "smaller",
};

const Heart = () => (
  <span role="img" aria-label="heart">
    ðŸ’œ
  </span>
);

interface EmbedState {
  variation: string;
}

// variation from SimpleProps is just the initial variation; the actual
// variation is stored in state, can be changed by resampling
class Embed extends React.Component<SimpleProps, EmbedState> {
  constructor(props: SimpleProps) {
    super(props);
    this.state = { variation: props.variation };
  }

  resample = () => {
    this.setState({ variation: Math.random().toString() });
  };

  render = () => {
    return (
      <div className="embed-container" style={containerStyle}>
        <Simple
          domain={this.props.domain}
          substance={this.props.substance}
          style={this.props.style}
          variation={this.state.variation}
          interactive={this.props.interactive}
        />
        <div style={{ width: "100%", height: "100%" }} />
        <div className="embed-footer" style={footerStyle}>
          <a href="https://penrose.cs.cmu.edu/">
            <Logo width={24} color={"white"} />
          </a>
          <div className="embed-text" style={textStyle}>
            Generated by Penrose with <Heart />
          </div>
          <div onClick={this.resample}>
            <Resample size={24} color={"white"} />
          </div>
        </div>
      </div>
    );
  };
}

export { Embed };
